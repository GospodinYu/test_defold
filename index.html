1. **Подготовка игры на дефолде**

   Убедитесь, что ваша игра на Defold готова к экспорту. 
   
   - Откройте проект в редакторе Defold.
   - Перейдите в `Project` > `Bundle` > `HTML5`.
   - Экспортируйте проект как HTML5.
     
     В результате у вас будет папка с файлами: `index.html`, `game.js`, `game.wasm` и другие ресурсы.

2. **Настройка хостинга для файлов**

   Поскольку Telegram веб-приложения требуют доступа к публичному URL, вам нужно загрузить ваши файлы на хостинг.

   **Бесплатные варианты хостинга**:
   - GitHub Pages
   - Netlify
   - Vercel

   **Пример с GitHub Pages**:
   - Создайте репозиторий на GitHub и загрузите ваши HTML5-файлы.
   - Активируйте Pages через `Settings` > `Pages` > `Deploy from branch`.
   - Ваш сайт станет доступен по URL: `https://username.github.io/repository/`.

3. **Создание бота в Telegram**

   - Напишите [@BotFather](https://t.me/BotFather) в Telegram.
   - Создайте нового бота с помощью команды `/newbot`.
   - Сохраните полученный `TOKEN`.

4. **Настройка веб-приложения в Telegram**

   Telegram позволяет запустить веб-приложение через бота с функцией Web App. Для этого вам понадобится `index.html` с корректным хостингом.

   Добавьте следующий код в ваш `index.html` для инициализации Web App:

   ```html
   <!DOCTYPE html>
   <html lang="en">
   <head>
       <meta charset="utf-8">
       <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
       <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui, shrink-to-fit=no">
       <meta name="apple-mobile-web-app-capable" content="yes">
       <title>Slasher-prototype 1.3</title>
       <style type='text/css'>
       body {
           position: fixed;
           margin: 0;
           padding: 0;
       }

       .canvas-app-container {
           width: 100%;
           height: 100%;
           position: absolute;
           align-items: center;
           justify-content: center;
           overflow: hidden;
       }

       #canvas {
           outline: none;
           border: 0;
           width: 100%;
           vertical-align: bottom;
       }

       .buttons-background {
           background-color: #1e2226;
           width: 100%;
           height: 42px;
       }

       .button {
           background-color: #394046;
           color: #fafcff;
           cursor: pointer;
           padding: 10px;
           text-align: center;
           font-family: sans-serif;
       }
       </style>
       <script src="https://telegram.org/js/telegram-web-app.js"></script>
   </head>
   <body>
       <div id="app-container" class="canvas-app-container">
           <div id="canvas-container">
               <canvas id="canvas" tabindex="1" width="1600" height="900"></canvas>
           </div>
           <div class="buttons-background">
               <div class="button" onclick="Module.toggleFullscreen();">Fullscreen</div>
               <div style="text-align: right; color: #BFBFBF;">Made with <a href="https://defold.com/" target="_blank" style="color: #fafcff; text-decoration: none;">Defold</a></div>
           </div>
       </div>
       <script src="dmloader.js"></script>
       <script>
           const tg = window.Telegram.WebApp;
           tg.expand();
           console.log("Telegram Web App initialized");

           if (window.location.href.startsWith("file://")) {
               alert("Run this file from a web server, not directly.");
           } else {
               EngineLoader.load("canvas", "Slasherprototype");
           }
       </script>
   </body>
   </html>
   ```

5. **Запуск Web App через Telegram-бота**

   - Отправьте пользователю специальную кнопку, которая откроет Web App. Используйте следующий код с библиотекой [python-telegram-bot](https://python-telegram-bot.readthedocs.io):

   ```python
   from telegram import Update, WebAppInfo, KeyboardButton, ReplyKeyboardMarkup
   from telegram.ext import ApplicationBuilder, CommandHandler

   async def start(update: Update, context):
       button = KeyboardButton("Запустить игру", web_app=WebAppInfo(url="https://username.github.io/repository/"))
       markup = ReplyKeyboardMarkup([[button]], resize_keyboard=True)
       await update.message.reply_text("Нажмите кнопку, чтобы запустить игру!", reply_markup=markup)

   app = ApplicationBuilder().token("ВАШ_BOT_TOKEN").build()
   app.add_handler(CommandHandler("start", start))
   app.run_polling()
   ```

6. **Тестирование**

   - Запустите бота с командой `/start`.
   - Нажмите на кнопку "Запустить игру" и убедитесь, что игра запускается в Telegram Web App.

Теперь ваша игра на Defold запускается как веб-приложение через Telegram-бота!
